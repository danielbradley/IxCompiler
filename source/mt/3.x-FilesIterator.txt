
.. Files Iterator

~!include/ixcompiler.FilesIterator.h~
#ifndef IXCOMPILER_FILESITERATOR_H
#define IXCOMPILER_FILESITERATOR_H

FilesIterator* FilesIterator_new      ( const char** filepaths );
FilesIterator* FilesIterator_free     ( FilesIterator** self   );
bool           FilesIterator_hasNext  ( FilesIterator*  self   );
File*          FilesIterator_next     ( FilesIterator*  self   );

#endif
~

~!c/ixcompiler.FilesIterator.c~
#include <stdlib.h>
#include "ixcompiler.h"
#include "ixcompiler.File.h"
#include "ixcompiler.FilesIterator.h"
#include "todo.h"

struct _FilesIterator
{
    const char** filepaths;
    int          next;
};
~

~c/ixcompiler.FilesIterator.c~
FilesIterator* FilesIterator_new( const char** filepaths )
{
    FilesIterator* self = calloc( 1, sizeof( FilesIterator ) );
    if ( self )
    {
        self->filepaths = filepaths;
        self->next      = 0;
    }
    return self;
}
~

~c/ixcompiler.FilesIterator.c~
FilesIterator* FilesIterator_free     ( FilesIterator** self )
{
    free( *self ); *self = 0;

    return *self;
}
~

~c/ixcompiler.FilesIterator.c~
bool FilesIterator_hasNext( FilesIterator* self )
{
    return (null != self->filepaths[self->next]);
}
~

~c/ixcompiler.FilesIterator.c~
File* FilesIterator_next( FilesIterator* self )
{
    if ( FilesIterator_hasNext( self ) )
    {
        return File_new( self->filepaths[self->next++] );
    } else {
        return null;
    }
}
~
