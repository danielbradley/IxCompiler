
.. Path

~!include/ixcompiler.Path.h~
#ifndef IXCOMPILER_PATH_H
#define IXCOMPILER_PATH_H

Path* Path_new     ( const char* target );
Path* Path_free    ( Path** self )       ;
bool  Path_exists  ( Path* self )        ;
bool  Path_canWrite( Path* self )        ;

#endif
~

~!c/ixcompiler.Path.c~
#include <stdlib.h>
#include "ixcompiler.h"
#include "ixcompiler.Path.h"
#include "ixcompiler.Platform.h"

struct _Path
{
    bool  exists;
    bool  canWrite;
    char* path;
};
~

~c/ixcompiler.Path.c~
Path* Path_new( const char* target )
{
    Path* self = calloc( 1, sizeof( Path ) );
    if ( self )
    {
        self->exists   = Platform_Location_IsDirectory( target );
        self->canWrite = Platform_Location_IsWritable ( target );
        self->path     = Platform_Location_FullPath   ( target );
    }

    return self;
}
~

~c/ixcompiler.Path.c~
Path* Path_free( Path** self )
{
    free( (*self)->path );
    free( *self ); *self = 0;

    return *self;
}
~

~c/ixcompiler.Path.c~
bool Path_exists( Path* self )
{
    return self->exists;
}
~

~c/ixcompiler.Path.c~
bool Path_canWrite( Path* self )
{
    return self->canWrite;
}
~
